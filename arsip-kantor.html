<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Arsip Digital</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .welcome-screen { display: flex; justify-content: center; align-items: center; min-height: 80vh; }
        .welcome-box { background: white; border-radius: 20px; padding: 60px 40px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); text-align: center; max-width: 600px; }
        .welcome-box h1 { color: #667eea; font-size: 3em; margin-bottom: 20px; }
        .welcome-box p { color: #666; font-size: 1.3em; margin-bottom: 40px; }
        .btn-enter { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 20px 60px; border-radius: 15px; font-size: 1.3em; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-enter:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        header { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); margin-bottom: 30px; text-align: center; }
        header h1 { color: #667eea; font-size: 2.5em; margin-bottom: 10px; }
        .nav-tabs { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 30px; }
        .tab-btn { background: white; border: none; padding: 15px 25px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; color: #667eea; transition: all 0.3s; flex: 1; min-width: 150px; }
        .tab-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .tab-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .content-section { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); display: none; }
        .content-section.active { display: block; }
        .search-box input { width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 16px; margin-bottom: 20px; }
        .category-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin: 20px 0; }
        .category-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .category-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .category-card h3 { font-size: 1.3em; margin-bottom: 10px; }
        .category-card p { font-size: 2.5em; font-weight: bold; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #667eea; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .file-item { background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #667eea; }
        .file-info h4 { color: #667eea; margin-bottom: 5px; font-size: 1.2em; }
        .file-info p { color: #666; font-size: 14px; margin: 5px 0; }
        .file-actions { margin-top: 15px; }
        .file-actions button { background: #667eea; color: white; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; margin-right: 10px; margin-bottom: 5px; transition: all 0.3s; }
        .file-actions button:hover { opacity: 0.9; transform: translateY(-2px); }
        .file-actions button.download { background: #27ae60; }
        .file-actions button.delete { background: #e74c3c; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; text-align: center; }
        .stat-card h3 { font-size: 2.5em; margin-bottom: 5px; }
        .stat-card p { font-size: 1.1em; }
        .alert { padding: 15px; border-radius: 10px; margin-bottom: 20px; background: #d1ecf1; color: #0c5460; border-left: 4px solid #17a2b8; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); }
        .modal.active { display: flex; justify-content: center; align-items: center; }
        .modal-content { background: white; border-radius: 15px; padding: 30px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto; position: relative; }
        .modal-close { position: absolute; right: 20px; top: 20px; font-size: 30px; cursor: pointer; color: #999; }
        .modal-close:hover { color: #333; }
        .preview-image { width: 100%; border-radius: 10px; margin-top: 20px; }
        .modal-content p { margin: 10px 0; color: #666; }
        .modal-content strong { color: #333; }
    </style>
</head>
<body>
    <div class="container">
        <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-box">
                <h1>üìÅ Selamat Datang</h1>
                <p>Sistem Arsip Digital Kantor</p>
                <button class="btn-enter" onclick="masukSistem()">Masuk ke Sistem</button>
            </div>
        </div>

        <div id="mainApp" style="display: none;">
            <header>
                <h1>üìÅ SISTEM ARSIP DIGITAL</h1>
                <p>Bagian Fasilitasi Penganggaran dan Pengawasan - Setwan Kota Bima</p>
            </header>

            <div class="nav-tabs">
                <button class="tab-btn active" onclick="gantiTab(0)">Dashboard</button>
                <button class="tab-btn" onclick="gantiTab(1)">Arsip</button>
                <button class="tab-btn" onclick="gantiTab(2)">Upload</button>
                <button class="tab-btn" onclick="gantiTab(3)">Cari</button>
                <button class="tab-btn" onclick="gantiTab(4)">Panduan</button>
            </div>

            <div id="tab0" class="content-section active">
                <h2>üìä Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card"><h3 id="total">0</h3><p>Total Dokumen</p></div>
                    <div class="stat-card"><h3 id="bulan">0</h3><p>Bulan Ini</p></div>
                    <div class="stat-card"><h3>5</h3><p>Kategori</p></div>
                </div>
                <div class="category-grid">
                    <div class="category-card" onclick="filterKat('Surat Keluar')"><h3>üì§ Surat Keluar</h3><p id="c0">0</p></div>
                    <div class="category-card" onclick="filterKat('Surat Masuk')"><h3>üì• Surat Masuk</h3><p id="c1">0</p></div>
                    <div class="category-card" onclick="filterKat('Laporan')"><h3>üìä Laporan</h3><p id="c2">0</p></div>
                    <div class="category-card" onclick="filterKat('Notulen')"><h3>üìù Notulen</h3><p id="c3">0</p></div>
                    <div class="category-card" onclick="filterKat('Dokumentasi')"><h3>üì∏ Dokumentasi</h3><p id="c4">0</p></div>
                </div>
            </div>

            <div id="tab1" class="content-section">
                <h2>üìÇ Daftar Arsip</h2>
                <input type="text" placeholder="Filter berdasarkan nama atau kategori..." onkeyup="tampilArsip()" id="filter" style="width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;margin-bottom:20px;">
                <div id="listArsip"></div>
            </div>

            <div id="tab2" class="content-section">
                <h2>üì§ Upload Dokumen Baru</h2>
                <div style="background:#f9f9f9;padding:30px;border-radius:10px;">
                    <div class="form-group">
                        <label>Nama Dokumen *</label>
                        <input type="text" id="nama" placeholder="Contoh: Surat Undangan Rapat" required>
                    </div>
                    <div class="form-group">
                        <label>Kategori *</label>
                        <select id="kategori">
                            <option value="Surat Keluar">Surat Keluar</option>
                            <option value="Surat Masuk">Surat Masuk</option>
                            <option value="Laporan">Laporan</option>
                            <option value="Notulen">Notulen</option>
                            <option value="Dokumentasi">Dokumentasi</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nomor Dokumen</label>
                        <input type="text" id="nomor" placeholder="Contoh: 001/FPP/I/2026">
                    </div>
                    <div class="form-group">
                        <label>Tanggal *</label>
                        <input type="date" id="tanggal" required>
                    </div>
                    <div class="form-group">
                        <label>Pengunggah *</label>
                        <input type="text" id="pengunggah" placeholder="Nama Anda" required>
                    </div>
                    <div class="form-group">
                        <label>Keterangan</label>
                        <textarea id="keterangan" rows="3" placeholder="Tambahkan keterangan dokumen (opsional)"></textarea>
                    </div>
                    <div class="form-group">
                        <label>File * (Max 10MB)</label>
                        <input type="file" id="file" accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png">
                    </div>
                    <button class="btn-primary" onclick="uploadDok()">üì§ Upload Dokumen</button>
                </div>
            </div>

            <div id="tab3" class="content-section">
                <h2>üîç Pencarian Dokumen</h2>
                <input type="text" id="cari" placeholder="Ketik kata kunci (minimal 2 karakter)..." onkeyup="cariDok()" style="width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;margin-bottom:20px;">
                <div id="hasilCari"></div>
            </div>

            <div id="tab4" class="content-section">
                <h2>üìñ Panduan Penggunaan</h2>
                <div style="line-height: 1.8;">
                    <h3 style="color:#667eea; margin-top:20px;">üéØ Cara Menggunakan Sistem</h3>
                    <p><strong>1. Dashboard:</strong> Melihat ringkasan dan statistik dokumen</p>
                    <p><strong>2. Arsip:</strong> Melihat semua dokumen yang tersimpan</p>
                    <p><strong>3. Upload:</strong> Mengunggah dokumen baru ke sistem</p>
                    <p><strong>4. Cari:</strong> Mencari dokumen berdasarkan kata kunci</p>
                    
                    <h3 style="color:#667eea; margin-top:20px;">üìù Tips Upload</h3>
                    <p>‚Ä¢ Pastikan nama dokumen jelas dan deskriptif</p>
                    <p>‚Ä¢ Pilih kategori yang sesuai</p>
                    <p>‚Ä¢ Isi nomor dokumen jika ada</p>
                    <p>‚Ä¢ Ukuran file maksimal 10MB</p>
                    
                    <h3 style="color:#667eea; margin-top:20px;">üîç Tips Pencarian</h3>
                    <p>‚Ä¢ Gunakan kata kunci yang spesifik</p>
                    <p>‚Ä¢ Bisa mencari berdasarkan nama, kategori, atau nomor dokumen</p>
                    <p>‚Ä¢ Filter pada tab Arsip untuk menyaring hasil</p>
                </div>
            </div>
        </div>

        <div id="modal" class="modal">
            <div class="modal-content" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="tutupModal()">&times;</span>
                <h2 id="modalJudul" style="color:#667eea;"></h2>
                <div id="modalIsi"></div>
            </div>
        </div>

        <div id="modalKonfirmasi" class="modal">
            <div class="modal-content" onclick="event.stopPropagation()" style="max-width: 500px;">
                <h2 style="color:#e74c3c; margin-bottom: 20px;">‚ö†Ô∏è Konfirmasi Hapus</h2>
                <p id="pesanKonfirmasi" style="margin-bottom: 30px; font-size: 16px;"></p>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button onclick="batalkanHapus()" style="background: #95a5a6; color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600;">Batal</button>
                    <button onclick="konfirmasiHapus()" style="background: #e74c3c; color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 600;">Hapus</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let dokumen = [];
        let storageAvailable = false;
        let idDokumenAkanDihapus = null;

        // Fungsi untuk masuk sistem
        function masukSistem() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            muatData();
        }

        // Fungsi untuk memuat data dari storage
        async function muatData() {
            if (typeof window.storage !== 'undefined') {
                try {
                    const r = await window.storage.get('arsip-docs');
                    if (r && r.value) {
                        dokumen = JSON.parse(r.value);
                        storageAvailable = true;
                    } else {
                        storageAvailable = true;
                    }
                } catch(e) {
                    console.log('Inisialisasi storage baru');
                    storageAvailable = true;
                }
            } else {
                console.log('Storage tidak tersedia, menggunakan memory');
                storageAvailable = false;
            }
            updateUI();
        }

        // Fungsi untuk menyimpan data ke storage
        async function simpanData() {
            if (!storageAvailable) return;
            
            try {
                await window.storage.set('arsip-docs', JSON.stringify(dokumen));
                console.log('Data berhasil disimpan');
            } catch(e) {
                console.error('Error menyimpan:', e);
            }
        }

        // Fungsi untuk mengganti tab
        function gantiTab(n) {
            for(let i=0;i<5;i++) {
                document.getElementById('tab'+i).classList.remove('active');
                document.querySelectorAll('.tab-btn')[i].classList.remove('active');
            }
            document.getElementById('tab'+n).classList.add('active');
            document.querySelectorAll('.tab-btn')[n].classList.add('active');
        }

        // Fungsi untuk upload dokumen
        function uploadDok() {
            const nama = document.getElementById('nama').value;
            const tanggal = document.getElementById('tanggal').value;
            const pengunggah = document.getElementById('pengunggah').value;
            const f = document.getElementById('file').files[0];
            
            if(!nama || !tanggal || !pengunggah) {
                alert('‚ö†Ô∏è Mohon isi semua field yang wajib (*)');
                return;
            }
            
            if(!f) {
                alert('‚ö†Ô∏è Pilih file yang akan diupload!');
                return;
            }
            
            if(f.size > 10485760) {
                alert('‚ö†Ô∏è Ukuran file maksimal 10MB!');
                return;
            }
            
            const r = new FileReader();
            r.onload = function(e) {
                dokumen.push({
                    id: Date.now(),
                    nama: nama,
                    kategori: document.getElementById('kategori').value,
                    nomor: document.getElementById('nomor').value,
                    tanggal: tanggal,
                    pengunggah: pengunggah,
                    keterangan: document.getElementById('keterangan').value,
                    namaFile: f.name,
                    ukuran: (f.size/1024).toFixed(2) + ' KB',
                    tipe: f.type,
                    data: e.target.result,
                    upload: new Date().toLocaleDateString('id-ID')
                });
                simpanData();
                updateUI();
                
                // Reset form
                document.getElementById('nama').value = '';
                document.getElementById('nomor').value = '';
                document.getElementById('pengunggah').value = '';
                document.getElementById('keterangan').value = '';
                document.getElementById('file').value = '';
                document.getElementById('tanggal').valueAsDate = new Date();
                
                alert('‚úÖ Dokumen berhasil diupload!');
                gantiTab(1);
            };
            r.readAsDataURL(f);
        }

        // Fungsi untuk update UI
        function updateUI() {
            document.getElementById('total').textContent = dokumen.length;
            const now = new Date();
            document.getElementById('bulan').textContent = dokumen.filter(d => {
                const p = d.upload.split('/');
                return parseInt(p[1]) === now.getMonth()+1 && parseInt(p[2]) === now.getFullYear();
            }).length;
            
            const kat = ['Surat Keluar','Surat Masuk','Laporan','Notulen','Dokumentasi'];
            kat.forEach((k,i) => {
                document.getElementById('c'+i).textContent = dokumen.filter(d => d.kategori === k).length;
            });
            
            tampilArsip();
        }

        // Fungsi untuk menampilkan arsip
        function tampilArsip(data = dokumen) {
            const filterEl = document.getElementById('filter');
            const filter = filterEl ? filterEl.value.toLowerCase() : '';
            const filtered = filter ? data.filter(d => 
                d.nama.toLowerCase().includes(filter) || 
                d.kategori.toLowerCase().includes(filter) ||
                (d.nomor && d.nomor.toLowerCase().includes(filter))
            ) : data;
            
            const listArsip = document.getElementById('listArsip');
            if(!listArsip) return;
            
            if(filtered.length === 0) {
                listArsip.innerHTML = '<div class="alert">üì≠ Tidak ada dokumen yang ditemukan</div>';
                return;
            }
            
            // Clear existing content
            listArsip.innerHTML = '';
            
            // Create elements for each document
            filtered.forEach(d => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <h4>${d.nama}</h4>
                        <p>üìÅ ${d.kategori} | üìÖ ${d.tanggal} | üë§ ${d.pengunggah} | üì¶ ${d.ukuran}</p>
                        <p>${d.keterangan || '-'}</p>
                        ${d.nomor ? '<p><strong>No:</strong> '+d.nomor+'</p>' : ''}
                    </div>
                    <div class="file-actions">
                        <button onclick="lihat(${d.id})">üëÅÔ∏è Lihat</button>
                        <button class="download" onclick="download(${d.id})">‚¨áÔ∏è Download</button>
                        <button class="delete" onclick="hapus(${d.id})">üóëÔ∏è Hapus</button>
                    </div>
                `;
                
                listArsip.appendChild(fileItem);
            });
        }

        // Fungsi untuk filter berdasarkan kategori
        function filterKat(k) {
            gantiTab(1);
            document.getElementById('filter').value = k;
            tampilArsip();
        }

        // Fungsi untuk mencari dokumen
        function cariDok() {
            const s = document.getElementById('cari').value.toLowerCase();
            const hasilCari = document.getElementById('hasilCari');
            
            if(s.length < 2) {
                hasilCari.innerHTML = '<div class="alert">‚å®Ô∏è Ketik minimal 2 karakter untuk mencari</div>';
                return;
            }
            
            const hasil = dokumen.filter(d => 
                d.nama.toLowerCase().includes(s) || 
                d.kategori.toLowerCase().includes(s) ||
                (d.nomor && d.nomor.toLowerCase().includes(s)) ||
                (d.keterangan && d.keterangan.toLowerCase().includes(s))
            );
            
            if(hasil.length === 0) {
                hasilCari.innerHTML = '<div class="alert">‚ùå Tidak ditemukan dokumen yang sesuai</div>';
                return;
            }
            
            // Clear and create elements
            hasilCari.innerHTML = '';
            
            hasil.forEach(d => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                fileItem.innerHTML = `
                    <div class="file-info">
                        <h4>${d.nama}</h4>
                        <p>üìÅ ${d.kategori} | üìÖ ${d.tanggal} | üë§ ${d.pengunggah}</p>
                        ${d.nomor ? '<p><strong>No:</strong> '+d.nomor+'</p>' : ''}
                    </div>
                    <div class="file-actions">
                        <button onclick="lihat(${d.id})">üëÅÔ∏è Lihat</button>
                        <button class="download" onclick="download(${d.id})">‚¨áÔ∏è Download</button>
                    </div>
                `;
                
                hasilCari.appendChild(fileItem);
            });
        }

        // Fungsi untuk melihat detail dokumen
        function lihat(id) {
            const d = dokumen.find(x => x.id === id);
            if(!d) {
                alert('‚ùå Dokumen tidak ditemukan');
                return;
            }
            
            document.getElementById('modalJudul').textContent = d.nama;
            
            let isi = '';
            if(d.tipe.startsWith('image/')) {
                isi = `<img src="${d.data}" class="preview-image" alt="${d.nama}">`;
            } else {
                isi = `
                    <p><strong>Kategori:</strong> ${d.kategori}</p>
                    <p><strong>Nomor:</strong> ${d.nomor || '-'}</p>
                    <p><strong>Tanggal:</strong> ${d.tanggal}</p>
                    <p><strong>Pengunggah:</strong> ${d.pengunggah}</p>
                    <p><strong>Tanggal Upload:</strong> ${d.upload}</p>
                    <p><strong>Nama File:</strong> ${d.namaFile}</p>
                    <p><strong>Ukuran:</strong> ${d.ukuran}</p>
                    <p><strong>Keterangan:</strong> ${d.keterangan || '-'}</p>
                `;
            }
            
            document.getElementById('modalIsi').innerHTML = isi;
            document.getElementById('modal').classList.add('active');
        }

        // Fungsi untuk download dokumen
        function download(id) {
            const d = dokumen.find(x => x.id === id);
            if(!d) {
                alert('‚ùå Dokumen tidak ditemukan');
                return;
            }
            
            const a = document.createElement('a');
            a.href = d.data;
            a.download = d.namaFile;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            alert('‚úÖ File sedang didownload: ' + d.namaFile);
        }

        // Fungsi untuk menghapus dokumen
        function hapus(id) {
            console.log('=== HAPUS DIPANGGIL ===');
            console.log('ID yang akan dihapus:', id);
            
            // Cari dokumen berdasarkan ID
            const doc = dokumen.find(x => x.id === id);
            
            if(!doc) {
                alert('‚ùå Dokumen tidak ditemukan');
                return;
            }
            
            // Simpan ID untuk digunakan saat konfirmasi
            idDokumenAkanDihapus = id;
            
            // Tampilkan modal konfirmasi
            document.getElementById('pesanKonfirmasi').innerHTML = 
                'Yakin ingin menghapus dokumen:<br><br><strong>"' + doc.nama + '"</strong><br><br>Tindakan ini tidak dapat dibatalkan!';
            document.getElementById('modalKonfirmasi').classList.add('active');
        }

        // Fungsi untuk mengkonfirmasi penghapusan
        function konfirmasiHapus() {
            console.log('User mengkonfirmasi hapus');
            
            if(idDokumenAkanDihapus === null) {
                console.log('ID dokumen null');
                return;
            }
            
            const id = idDokumenAkanDihapus;
            console.log('Menghapus dokumen ID:', id);
            console.log('Jumlah dokumen sebelum hapus:', dokumen.length);
            
            // Cari index dokumen
            const index = dokumen.findIndex(x => x.id === id);
            console.log('Index ditemukan:', index);
            
            if(index === -1) {
                alert('‚ùå Dokumen tidak ditemukan');
                document.getElementById('modalKonfirmasi').classList.remove('active');
                idDokumenAkanDihapus = null;
                return;
            }
            
            const namaDoc = dokumen[index].nama;
            
            // Hapus menggunakan splice
            dokumen.splice(index, 1);
            
            console.log('Jumlah dokumen setelah hapus:', dokumen.length);
            console.log('Daftar ID setelah hapus:', dokumen.map(d => d.id));
            
            // Simpan ke storage
            simpanData().then(() => {
                console.log('Data berhasil disimpan ke storage');
            }).catch(err => {
                console.error('Error saat simpan:', err);
            });
            
            // Update tampilan
            updateUI();
            
            // Tutup modal dan reset ID
            document.getElementById('modalKonfirmasi').classList.remove('active');
            idDokumenAkanDihapus = null;
            
            alert('‚úÖ Dokumen "' + namaDoc + '" berhasil dihapus!');
            console.log('=== HAPUS SELESAI ===');
        }

        // Fungsi untuk membatalkan penghapusan
        function batalkanHapus() {
            console.log('User membatalkan penghapusan');
            document.getElementById('modalKonfirmasi').classList.remove('active');
            idDokumenAkanDihapus = null;
        }

        // Fungsi untuk menutup modal
        function tutupModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Event listener untuk menutup modal saat klik di luar
        document.getElementById('modal').addEventListener('click', function(e) {
            if(e.target === this) {
                tutupModal();
            }
        });

        // Set tanggal hari ini sebagai default saat halaman load
        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('tanggal').valueAsDate = new Date();
        });
    </script>
</body>
</html>